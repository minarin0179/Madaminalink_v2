---
description: /docs/commands配下のコマンドドキュメントをレビューし、スタイルガイドとの整合性を確認する
---

指定されたマークダウンファイルをレビューしてください。レビュー対象は $ARGUMENTS です。

以下のスタイルガイドに基づいてレビューを実施してください。

**レビュー前に必ず確認するファイル**:
1. **実装コード**: レビュー対象コマンドの実装コードを読み、ドキュメントの記述内容が実際の処理と一致しているか確認
   - スラッシュコマンド: `src/commands/slashcommands/{コマンド名}.ts`
   - コンテキストメニュー: `src/commands/contextmenu/{コマンド名}.ts`
2. **言及されている他コマンド**: レビュー対象のドキュメント内で他のコマンド（例: `/delete`, `/copy` など）への言及やリンクがある場合は、その説明が実際のコマンドの機能と一致しているかを確認するために、該当するコマンドのドキュメントを読む

**重要**: 上記以外のファイルを読む必要はありません。スタイルの基準は以下のガイドにすべて記載されています。Glob や Grep でスタイルやガイドを検索しないでください。

---

## 1. Frontmatter

### 必須項目
- [ ] `title` が `/コマンド名` の形式になっている
- [ ] `description` がコマンドの概要を1文で簡潔に説明している
- [ ] `<PageHeader />` がfrontmatterの直後に配置されている

### 良い例
```yaml
---
title: /gather
description: 他のVCにいるメンバーを、自分のいるVCに一括で移動させます。
---
<PageHeader />
```

### 悪い例
```yaml
---
title: gather  # スラッシュが抜けている
description: gatherコマンド  # 説明になっていない
---
```

---

## 2. 章構成

### 推奨される構成順序
1. **使用方法** - コマンドの基本的な使い方（必須）
2. **オプション** - オプション一覧表と詳細説明
3. **使用例** - 具体的な使用例
4. **用途** - ユースケースごとの説明

### チェック項目
- [ ] 見出しレベルが適切（## が主要セクション、### がサブセクション）
- [ ] セクションの順序が論理的に流れている
- [ ] 不要なセクションが含まれていない（テンプレートの未使用部分が残っていないか）
- [ ] 各セクションに適切な内容が記載されている

### 構成の良い例（/gather）
```markdown
## 使用方法
（基本的な使い方を最初に）

## オプション
（オプション一覧表 → オプションの詳細）

## 使用例
### 全員を集める
### 特定のロールのメンバーだけを集める

## 用途
### 密談から全体会議に戻す
### プレイヤーだけを集める
```

---

## 3. 文体

### 敬体（です・ます調）の統一
- [ ] 本文は「です・ます調」で統一されている
- [ ] 箇条書きの項目名は体言止めまたは名詞句で簡潔に

### 良い例
```markdown
実行すると、サーバー内の他のVCに参加しているメンバーを、自分がいるVCに移動させます。

- **デフォルト**: @everyone（VCに参加している全メンバー）
- **指定可能な対象**: ロール
```

### 悪い例
```markdown
実行すると、移動する。  # 「だ・である調」になっている
デフォルト値は@everyoneである。  # 敬体と常体が混在
```

### 表現の統一
- [ ] 「できます」と「可能です」が混在していない
- [ ] 同じ概念に対して同じ用語を使用している
- [ ] 主語が明確になっている

### 句読点の統一
- [ ] 読点は「、」で統一されている（全角カンマ「，」を使用していない）
- [ ] 句点は「。」で統一されている（全角ピリオド「．」を使用していない）

---

## 4. オプション説明

### オプション一覧表
- [ ] 表形式で `| オプション | 必須 | 説明 |` のヘッダーがある
- [ ] 必須欄は「はい」「いいえ」で統一
- [ ] 説明は簡潔に（詳細は後述）

### 良い例
```markdown
| オプション | 必須 | 説明 |
|-----------|------|------|
| 対象 | いいえ | 移動対象を特定のロールに限定する |
```

### オプション詳細
- [ ] `#### オプション名` の形式で見出しがある
- [ ] **デフォルト**、**指定可能な値** などを太字で明示
- [ ] 制限事項がある場合は `::: warning` で明記

### 良い例
```markdown
#### ダイスの数

振るダイスの個数を指定します。

- **指定可能な値**: 1〜100
```

---

## 5. 画像の使い方

### 画像パス
- [ ] 相対パス `../images/commands/{コマンド名}/` 形式を使用している
- [ ] ファイル名は小文字とハイフンで構成（例: `before-gather.png`）

### 代替テキスト（alt属性）
- [ ] 画像の内容を具体的に説明している
- [ ] スクリーンリーダー利用者に伝わる説明になっている
- [ ] 「alt text」「image」などの一般的な文言を使用していない

### 良い例
```markdown
![gatherコマンド実行前: 全体会議VCと密談場所1VCにメンバーが分かれている](../images/commands/gather/before-gather.png)
```

### 悪い例
```markdown
![](../images/commands/gather/image1.png)  # alt textがない、ファイル名が不明確
![画像](image.png)  # alt textが説明になっていない、パスが不適切
```

### figureタグの使用（複数画像の横並び）
- [ ] 比較画像は `<div style="display: flex;">` + `<figure>` で横並び配置
- [ ] `<figcaption>` でキャプションを付与

### 良い例
```html
<div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-start;">
  <figure style="flex: 1; min-width: 200px; max-width: 48%; margin: 0; text-align: center;">
    <img src="../images/commands/archive/before-archive.png" alt="保存前のカテゴリ..." style="width: 100%; height: auto;">
    <figcaption>保存前</figcaption>
  </figure>
  <figure style="flex: 1; min-width: 200px; max-width: 48%; margin: 0; text-align: center;">
    <img src="../images/commands/archive/after-archive.png" alt="保存後のサマリー..." style="width: 100%; height: auto;">
    <figcaption>保存後</figcaption>
  </figure>
</div>
```

---

## 6. 注意書き・ヒントの配置

### 種類と用途
- `::: warning` - 制限事項、注意が必要な操作、データ損失の可能性
- `::: tip` - 便利な使い方、関連コマンドへのリンク

### 配置ルール
- [ ] 関連する説明の**直後**に配置されている
- [ ] 文書の末尾にまとめて配置していない
- [ ] 適切な種類（warning/tip）を使用している

### 良い例（関連説明の直後に配置）
```markdown
#### 対象

移動対象を特定のロールに限定します。

- **デフォルト**: @everyone（VCに参加している全メンバー）
- **指定可能な値**: ロール

::: tip ヒント
閲覧権限がないチャンネルにいるメンバーも強制的に移動させることができます。
:::
```

### 悪い例（離れた場所に配置）
```markdown
#### 対象

移動対象を特定のロールに限定します。

## 使用例
...（他の内容）

::: tip  <!-- 関連セクションから離れすぎ -->
対象オプションについてのヒント
:::
```

---

## 7. コードブロック

### コマンド例
- [ ] コードブロックは言語指定なし（プレーンテキスト）
- [ ] 実際に実行可能なコマンド形式になっている

### 良い例
```
/gather 対象:@プレイヤー
```

### 悪い例
```bash
# bashの言語指定は不要
/gather 対象:@プレイヤー
```

---

## 8. 内部リンク

### 他コマンドへの参照
- [ ] `/commands/コマンド名` の形式でリンクしている
- [ ] リンクテキストは `/コマンド名` の形式

### 良い例
```markdown
ログを保存した後は、元のチャンネルを [/delete](/commands/delete) で削除するとチャンネル数を削減できます。
```

### 悪い例
```markdown
deleteコマンドで削除  # リンクがない
[こちら](/commands/delete)  # リンクテキストが不明確
```

---

## 9. 用途セクション

### 構成
- [ ] `### ユースケースの説明` の形式で見出しがある（例: `### セッション終了後のログ保存`）
- [ ] 番号付きリストで手順を説明している
- [ ] 具体的なユースケースが明確になっている

### 良い例
```markdown
### セッション終了後のログ保存

セッションが終了したチャンネルのログを残しつつ、チャンネル数を削減したい場合に使用します。

1. セッションが終了したカテゴリを選択して `/archive` を実行
2. カテゴリ内の全チャンネルがスレッドとして保存される
3. 元のカテゴリは [/delete](/commands/delete) で削除
```

### 悪い例
```markdown
### ケース1  # 何のケースか分からない
### 使い方1  # 具体性がない
```

---

## 10. 実装コードとの整合性

### チェック項目
- [ ] ドキュメントに記載されているオプション名が、実装コードの `addStringOption()` 等で定義されている名前と一致している
- [ ] オプションの必須/任意が実装の `setRequired()` と一致している
- [ ] サブコマンド（add, remove, change など）が実装の `addSubcommand()` と一致している
- [ ] ドキュメントで説明されている機能・挙動が、実装コードの処理内容と一致している
- [ ] デフォルト値の説明が実装と一致している
- [ ] 制限事項（例: ロール操作の制限）が実装のバリデーションロジックと一致している

### 確認すべき実装箇所
- **コマンド定義**: `new SlashCommandBuilder()` 周辺でオプション名・説明を確認
- **実行処理**: `execute()` 関数内で実際の処理内容を確認
- **バリデーション**: エラーハンドリングや権限チェックの条件を確認

---

## 11. 全体的な品質

### 完成度
- [ ] テンプレートのプレースホルダーが残っていない
- [ ] HTMLコメント（テンプレートの説明）が削除されている
- [ ] 空のセクションや未記入の箇所がない

### 読みやすさ
- [ ] 段落間に適切な空行がある
- [ ] 長すぎる段落がない（1段落3〜4文程度）
- [ ] 専門用語に説明がある、または既出の用語を使用している

### 一貫性
- [ ] 既存のコマンドドキュメントとスタイルが統一されている
- [ ] 表記ゆれがない（例: 「ボイスチャンネル」と「VC」の混在を避ける、または初出で説明）

---

## レビュー出力形式

以下の形式でレビュー結果を出力してください：

```markdown
# レビュー結果: {ファイル名}

## 概要
（全体的な評価を1〜2文で）

## 良い点
- （具体的な良い点を箇条書き）

## 改善が必要な点

### 重要度: 高
（必ず修正すべき問題）

### 重要度: 中
（できれば修正したい問題）

### 重要度: 低
（余裕があれば修正する問題）

## 修正提案
（具体的な修正例があれば記載）
```

---

## レビュー後のアクション

レビュー結果を出力した後、修正提案がある場合は `AskUserQuestion` ツールを使用して、各修正項目についてユーザーに確認してください。

### 質問形式

修正提案の項目ごとに以下の選択肢を提示してください：
- **修正する**: 提案通りに修正を実行
- **スキップ**: この項目は修正しない
- **別の方法で修正**: ユーザーが代替案を入力

### 例

```
質問: 「descriptionを『チャンネルを削除します。』に変更しますか？」
選択肢:
- 修正する（提案通りに変更）
- スキップ（変更しない）
- 別の方法で修正（代替案を入力）
```

### 注意事項
- 重要度「高」の項目から順に確認する
- 関連する修正項目はまとめて1つの質問にしてもよい
- ユーザーが「修正する」を選択した項目は、確認完了後にまとめて修正を実行する
